name: Private release to dev
run-name: Private release to dev. Version "${{ github.event.inputs.release_version }}"
on: 
  workflow_dispatch:
    inputs:
      release_version:
        type: string
        description: "Release version in format v1.0.0."
        required: true
      release_descritption:
        type: string
        description: "Release description"
        required: true

jobs:
  Supervisely-Release:
    permissions:
      contents: write
    uses: supervisely-ecosystem/workflows/.github/workflows/common.yml@master
    secrets:
      SUPERVISELY_API_TOKEN: "${{ secrets.SUPERVISELY_PRIVATE_DEV_API_TOKEN }}"
      SUPERVISELY_PROD_API_TOKEN: "${{ secrets.SUPERVISELY_PROD_API_TOKEN }}"
      GH_ACCESS_TOKEN: "${{ secrets.GITHUB_TOKEN }}"
    with:
      SUPERVISELY_SERVER_ADDRESS: "${{ vars.SUPERVISELY_DEV_SERVER_ADDRESS }}"
      SUPERVISELY_PROD_SERVER_ADDRESS: "${{ vars.SUPERVISELY_PROD_SERVER_ADDRESS }}"
      SLUG: "${{ github.repository }}"
      RELEASE_VERSION: "${{ github.event.inputs.release_version }}"
      RELEASE_DESCRIPTION: "${{ github.event.inputs.release_descritption }}"
      RELEASE_TYPE: "private"
      SUBAPP_PATHS: "__ROOT_APP__, subapp"
